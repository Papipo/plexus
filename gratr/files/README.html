<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>File: README</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



  <div id="fileHeader">
    <h1>README</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>README
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Thu Jan 04 08:22:13 CST 2007</td>
    </tr>
    </table>
  </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1>GRAph Theory in Ruby (<a href="../classes/GRATR.html">GRATR</a>)</h1>
<p>
<img src="../../gratr.jpg"> <a href="../classes/GRATR.html">GRATR</a> is a
framework for graph data structures and algorithms.
</p>
<p>
This project is a fork of Horst Duchene&#8217;s RGL library.
</p>
<p>
The design of the library is much influenced by the Boost Graph Library
(BGL) which is written in C++ heavily using its template mechanism. Refer
to <a
href="http://www.boost.org/libs/graph/doc">www.boost.org/libs/graph/doc</a>
for further links and documentation on graph data structures and algorithms
and the design rationales of BGL.
</p>
<p>
A comprehensive summary of graph terminology can be found in the the graph
section of the <em>Dictionary of Algorithms and Data Structures</em> at <a
href="http://www.nist.gov/dads/HTML/graph.html">www.nist.gov/dads/HTML/graph.html</a>.
</p>
<p>
There are two Arc classes, <a
href="../classes/GRATR/Arc.html">GRATR::Arc</a> and <a
href="../classes/GRATR/Edge.html">GRATR::Edge</a>.
</p>
<p>
<a href="../classes/GRATR/Digraph.html">GRATR::Digraph</a> and it&#8217;s
pseudonym GRATR::DirectedGraph are classes that have single directed edges
between vertices and loops are forbidden. <a
href="../classes/GRATR/DirectedPseudoGraph.html">GRATR::DirectedPseudoGraph</a>
allows for multiple directed edges between vertices and loops are
forbidden. <a
href="../classes/GRATR/DirectedMultiGraph.html">GRATR::DirectedMultiGraph</a>
allows for multiple directed edges between vertices and loops on vertices.
</p>
<p>
<a href="../classes/GRATR/UndirectedGraph.html">GRATR::UndirectedGraph</a>,
<a
href="../classes/GRATR/UndirectedPseudoGraph.html">GRATR::UndirectedPseudoGraph</a>
and <a
href="../classes/GRATR/UndirectedMultiGraph.html">GRATR::UndirectedMultiGraph</a>
are similar but all edges are undirected.
</p>
<p>
These classes are all available with a <tt>require &#8216;gratr&#8217;</tt>
statement in your Ruby code. If one wishes to pull the classes into the
current namespace, i.e. drop the <tt><a
href="../classes/GRATR.html">GRATR</a>::</tt> from all class statements and
use <tt>require &#8216;gratr/import&#8216;</tt> instead.
</p>
<h2>Design principles</h2>
<p>
This document concentrates on the special issues of the implementation in
Ruby. The main design goals directly taken from the BGL design are:
</p>
<ul>
<li>An interface for how the structure of a graph can be accessed using a
generic interface that hides the details of the graph data structure
implementation. This interface is defined by the module Graph, which should
be included in concrete classes.

</li>
<li>A standardized generic interface for traversing graphs using standard Ruby
block iterators.

</li>
<li>Implementation is separated from interface, and hidden from the average
user. An advanced user could also easily override the internals with a
different implementation if need be.

</li>
</ul>
<p>
<a href="../classes/GRATR.html">GRATR</a> provides some general purpose
graph classes that conform to this interface, but they are not meant to be
the <b>only</b> graph classes. As in BGL I believe that the main
contribution of the <a href="../classes/GRATR.html">GRATR</a> is the
formulation of this interface.
</p>
<p>
The BGL graph interface and graph components are generic in the sense of
the C++ Standard Template Library (STL). In Ruby other techniques are
available to express the generic character of the algorithms and data
structures mainly using mixins and iterators. The BGL documentation
mentions three means to achieve genericity:
</p>
<ul>
<li>Algorithm/Data-Structure Interoperability

</li>
<li>Extension through Function Objects and Visitors

</li>
<li>Element Type Parameterization

</li>
<li>Vertex and Arc Property Multi-Parameterization

</li>
</ul>
<p>
The first is easily achieved in <a href="../classes/GRATR.html">GRATR</a>
using mixins, which of course is not as efficient than C++ templates (but
much more readable :-). The second one is even more easily implemented
using standard iterators with blocks. The third one is no issue since Ruby
is dynamically typed: Each object can be a graph vertex (even nil!). There
is no need for a vertex (or even edge type). A label interface is provided
for end users as well. One could simply use a hash externally, but the
future development of network graphs will require a weight or capacity
property to be accessible.
</p>
<h3>Algorithms</h3>
<p>
This version of <a href="../classes/GRATR.html">GRATR</a> contains a core
set of algorithm patterns:
</p>
<ul>
<li>Breadth First Search Graph[1,2,1,3,1,4,2,5].bfs =&gt; [1, 2, 3, 4, 5]

</li>
<li>Depth First Search Graph[1,2,1,3,1,4,2,5].dfs =&gt; [1, 2, 5, 3, 4]

</li>
<li>A* Search

</li>
<li>Lexicographic Search

</li>
<li>Dijkstra&#8217;s Algorithm

</li>
<li>Floyd-Warshall

</li>
<li>Triangulation and Comparability detection

</li>
</ul>
<p>
The algorithm patterns by themselves do not compute any meaningful
quantities over graphs, they are merely building blocks for constructing
graph algorithms. The graph algorithms in <a
href="../classes/GRATR.html">GRATR</a> currently include:
</p>
<ul>
<li>Topological Sort (topsort)

</li>
<li>Strongly Connected Components (strong_connect)

</li>
<li>Transitive Closure (transitive_closure)

</li>
</ul>
<h3>Data Structures</h3>
<p>
<a href="../classes/GRATR.html">GRATR</a> currently provides one graph
module that implement a generalized adjacency list and an edge list
adaptor.
</p>
<ul>
<li><a href="../classes/GRATR/AdjacencyGraph.html">GRATR::AdjacencyGraph</a>

</li>
</ul>
<p>
The <a href="../classes/GRATR/Digraph.html">GRATR::Digraph</a> class is the
general purpose *swiss army knife* of graph classes, most of the other
classes are just modifications to this class. It is optimized for efficient
access to just the out-edges, fast vertex insertion and removal at the cost
of extra space overhead, etc.
</p>
<h3>GEM Installation</h3>
<p>
Download the GEM file and install it with ..
</p>
<pre>
  % gem install gratr-VERSION.gem
</pre>
<p>
or directly with
</p>
<pre>
  % gem install gratr
</pre>
<p>
Use the correct version number for VERSION (e.g. 0.2.x). You may need root
privileges to install.
</p>
<h3>Running tests</h3>
<p>
<a href="../classes/GRATR.html">GRATR</a> comes with a Rakefile which
automatically runs the tests. Goto the installation directory and start
rake:
</p>
<pre>
 % gem env
 Rubygems Environment:
  - VERSION: 0.8.3 (0.8.3)
  - INSTALLATION DIRECTORY: /usr/lib/ruby/gems/1.8
  - GEM PATH:
     - /usr/lib/ruby/gems/1.8
  - REMOTE SOURCES:
     - http://gems.rubyforge.org

 % cd /usr/lib/ruby/gems/1.8/gems/gratr-0.2.2/
 % r40&gt; rake
  (in /usr/lib/ruby/gems/1.8/gems/gratr-0.2.2)
  ruby1.8 -Ilib:tests -e0  -rtests/TestGraphXML  -rtests/TestComponents  -rtests/TestDirectedGraph  -rtests/TestArc  -rtests/TestImplicit  -rtests/TestTransitiveClosure  -rtests/TestTraversal  -rtests/TestUnDirectedGraph
 Loaded suite -e
 Started
 ........................................................................................................
 Finished in 0.736444 seconds.

 40 tests, 421 assertions, 0 failures, 0 errors
</pre>
<h3>Normal Installation</h3>
<p>
You have to install stream library before. You can than install <a
href="../classes/GRATR.html">GRATR</a> with the following command:
</p>
<pre>
  % ruby install.rb
</pre>
<p>
from its distribution directory. To uninstall it use
</p>
<pre>
  % ruby install.rb -u
</pre>
<p>
The rdoc is useful as well:
</p>
<pre>
  % rake rdoc
</pre>
<h2>Example irb session with <a href="../classes/GRATR.html">GRATR</a></h2>
<pre>
  irb&gt; require 'gratr/import'
  =&gt; true
  irb&gt; dg = Digraph[1,2, 2,3, 2,4, 4,5, 6,4, 1,6]
  =&gt; GRATR::Digraph[[2, 3], [1, 6], [2, 4], [4, 5], [1, 2], [6, 4]]
</pre>
<p>
A few properties of the graph
</p>
<pre>
  irb&gt; dg.directed?
  =&gt; true
  irb&gt; dg.vertex?(4)
  =&gt; true
  irb&gt; dg.edge?(2,4)
  =&gt; true
  irb&gt; dg.edge?(4,2)
  =&gt; false
  irb&gt; dg.vertices
  =&gt; [5, 6, 1, 2, 3, 4]
</pre>
<p>
Every object could be a vertex (there is no class Vertex), even the class
object <em>Object</em>:
</p>
<pre>
  irb&gt; dg.vertex? Object
  =&gt; false
  irb&gt; UndirectedGraph.new(dg).edges.sort.to_s
  =&gt; &quot;(1=2)(2=3)(2=4)(4=5)(1=6)(4=6)&quot;
</pre>
<p>
Add inverse edge (4-2) to directed graph:
</p>
<pre>
  irb&gt; dg.add_edge! 4,2
  =&gt; GRATR::Digraph[[2, 3], [1, 6], [4, 2], [2, 4], [4, 5], [1, 2], [6, 4]]
</pre>
<p>
(4-2) == (2-4) in the undirected graph:
</p>
<pre>
  irb&gt; UndirectedGraph.new(dg).edges.sort.to_s
  =&gt; &quot;(1=2)(2=3)(2=4)(4=5)(1=6)(4=6)&quot;
</pre>
<p>
(4-2) != (2-4) in directed graphs:
</p>
<pre>
  irb&gt; dg.edges.sort.to_s
  =&gt; &quot;(1-2)(1-6)(2-3)(2-4)(4-2)(4-5)(6-4)&quot;
  irb&gt; dg.remove_edge! 4,2
  =&gt; GRATR::Digraph[[2, 3], [1, 6], [2, 4], [4, 5], [1, 2], [6, 4]]
</pre>
<p>
<em>Topological sort</em> is realized with as iterator:
</p>
<pre>
  irb&gt; dg.topsort
  =&gt; [1, 2, 3, 6, 4, 5]
  irb&gt; y=0; dg.topsort {|v| y+=v}; y
  =&gt; 21

    # Use DOT to visualize this graph:
    irb&gt; require 'gratr/dot'
    irb&gt; dg.write_to_graphic_file('jpg','visualize')
    &quot;graph.jpg&quot;
</pre>
<p>
The result: <img src="../../examples/visualize.jpg">
</p>
<p>
Here&#8217;s an example showing the module inheritance hierarchy:
</p>
<pre>
  module_graph=Digraph.new
  ObjectSpace.each_object(Module) do |m|
    m.ancestors.each {|a| module_graph.add_edge!(m,a) if m != a}
  end

  gv = module_graph.vertices.select {|v| v.to_s.match(/GRATR/)}
  module_graph.induced_subgraph(gv).write_to_graphic_file('jpg','module_graph')
</pre>
<p>
The result: <img src="../../examples/module_graph.jpg">
</p>
<p>
Look for more in the examples directory.
</p>
<h2>Credits</h2>
<p>
Many thanks to Robert Feldt which also worked on a graph library (<a
href="http://rockit.sf.net/subprojects/graphr">rockit.sf.net/subprojects/graphr</a>)
who pointed me to BGL and many other graph resources. Manuel Simoni found a
subtle bug in a preliminary version announced at <a
href="http://rubygarden.com/ruby?RubyAlgorithmPackage/Graph">rubygarden.com/ruby?RubyAlgorithmPackage/Graph</a>.
</p>
<p>
Robert kindly allowed to integrate his work on graphr, which I did not yet
succeed. Especially his work to output graphs for <a
href="http://www.research.att.com/sw/tools/graphviz/download.html">GraphViz</a>
is much more elaborated than the minimal support in dot.rb.
</p>
<p>
Jeremy Siek one of the authors of the nice book &quot;The Boost Graph
Library (BGL)&quot; (<a
href="http://www.boost.org/libs/graph/doc">www.boost.org/libs/graph/doc</a>)
kindly allowed to use the BGL documentation as a <em>cheap</em> reference
for <a href="../classes/GRATR.html">GRATR</a>. He and Robert also gave
feedback and many ideas for <a href="../classes/GRATR.html">GRATR</a>.
</p>
<p>
Dave Thomas for <a href="http://rdoc.sourceforge.net">RDoc</a> which
generated what you read and Matz for Ruby. Dave included in the latest
version of RDoc (alpha9) the module dot/dot.rb which I use instead of
Roberts module to visualize graphs (see gratr/dot.rb).
</p>
<p>
Horst Duchene for RGL which provided the basis for this library and his
vision.
</p>
<p>
Rick Bradley who reworked the library and added many graph theoretic
constructs.
</p>
<h2>Known Bugs</h2>
<ul>
<li>Some of the digraph distance algorithms need reworked to work for pseudo
and multi graphs.

</li>
</ul>
<h2>To Do</h2>
<ul>
<li>Primal Dual for combinatorial optimization problems

</li>
<li>Min-Max Flow

</li>
<li>Near optimal traveling salesman problem

</li>
<li>Orientation of undirected graphs

</li>
</ul>
<h2>Release Notes</h2>
<p>
The core interface is about to be updated to allow for cleaner dependency
injects. Luke Kanies has also contributed several optimizations for speed
and logged some bugs. This will result in a 0.5 release coming soon.
</p>
<h3>0.4.3</h3>
<ul>
<li>Fixed bug in dot output dependency.

</li>
<li>Changed method.call to send in a couple places.

</li>
<li>Fixed bug in unconnected vertices for reversal. Ticket 7237

</li>
<li>Fixed bugs in A* Search. Ticket 7250.

</li>
</ul>
<h3>0.4.2</h3>
<ul>
<li>Fixed bug in parallel edge adjacency detection.

</li>
<li>Fix to allow symbols to be passed through to dot for labels.

</li>
<li>Changed naming to use Arcs for Digraphs and Edges for Undirected Graphs.

</li>
<li>Added a gem release.

</li>
</ul>
<h3>0.4.1</h3>
<ul>
<li>Got reflection working for graphs

</li>
<li>Fixed major bugs in multi and pseudo graph handling

</li>
</ul>
<h3>0.4.0</h3>
<p>
Initial release of fork from RGL library.
</p>
<h2>Copying</h2>
<p>
Copyright &#169; 2006 Shawn Patrick Garbett
</p>
<p>
Copyright &#169; 2002,2004,2005 by Horst Duchene
</p>
<p>
Copyright &#169; 2000,2001 Jeremy Siek, Indiana University
(jsiek@osl.iu.edu)
</p>
<p>
All rights reserved.
</p>
<p>
Jeremy Siek was one of the principal developers of the Boost Graph library.
Since this work is derivative, his name is included in the copyright list.
</p>
<p>
Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:
</p>
<pre>
    * Redistributions of source code must retain the above copyright notice(s),
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the Shawn Garbett nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
</pre>
<p>
THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
</p>
<h2>Support</h2>
<p>
Please contact me at <a
href="mailto:shawn@garbett.org">shawn@garbett.org</a> with bug reports
suggestions, and other comments. If you send patches, it would help if they
were generated using &quot;diff -u&quot;.
</p>

    </div>


   </div>


  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>